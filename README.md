Karpov.Courses -  Финальный проект "Анализ активности студентов и оптимизация воронки образовательной платформы" курса Аналитик данных.

Данный проект представляет собой решение двух аналитических задач с использованием SQL (PostgreSQL):
1. - Идентификация "Очень усердных учеников" на основе их активности в течение месяца.
2. - Расчет ключевых бизнес-метрик (ARPU, ARPAU, CR) для оценки эффективности нового экрана оплаты в рамках проведенного A/B-теста.

Цель:

Предоставить команде образовательной платформы метрики для:

- Оценки вовлеченности (Усердные ученики).

- Сравнения конверсии и дохода между тестовыми группами A/B-эксперимента.

Примененный стек: 

СУБД - PostgreSQL, Язык запросов - SQL, Среда для выполнения запросов и визуализации результатов - Redash.

 Логика и этапы решения1. 
 Задача: Очень усердные ученики (2.1)
 Условие: 
 Ученик считается "очень усердным", если он хотя бы раз за текущий месяц правильно решил 20 горошин (заданий) в одной дисциплине.
 Этапы:
 1) Фильтрация по дате и успеху: Использование WHERE для отбора записей, где correct = TRUE и timest находится в пределах заданного месяца (например, Октябрь 2021).
 2) Группировка и подсчет: Группировка данных по st_id и subject с использованием COUNT().
 3) Идентификация: Использование HAVING для фильтрации групп, где подсчет правильных решений COUNT(c_correct) >= 20.
 6) Финальный результат: Подсчет уникальных ID учеников (COUNT(DISTINCT st_id)) из полученного списка.

Задача: Оптимизация воронки и расчет метрик (2.2) 

Цель: Расчет ARPU, ARPAU, CR в покупку (общее, активное, по математике) по группам A/B-теста.

Ключевые определения:
- Активный пользователь (общий): Решил > 10 задач правильно за все время.
- Активный пользователь по математике: Решил 2 и более задач правильно по математике за все время.
- ARPU (Average Revenue Per User): Доход / Все пользователи в группе.
- ARPAU (Average Revenue Per Active User): Доход от активных / Количество активных.

Этапы:
1) - Подготовка данных об активности (stud_activity): Расчет общего количества правильных горошин и правильных горошин по математике для каждого st_id из таблицы peas.
2) - Подготовка данных о покупках (stud_check): Расчет суммарного дохода (money) и флаг покупки курса по математике для каждого st_id из таблицы final_project_check.
3) - Объединение и категоризация (full_data_grp):Объединение таблиц studs, stud_activity, и stud_check с использованием LEFT JOIN, чтобы сохранить всех участников A/B-теста.
4) - Создание бинарных флагов (active_stud, active_math_stud, made_purchase) на основе определенных порогов.
5) - Финальное агрегирование: Группировка по test_grp и расчет всех требуемых метрик с использованием агрегатных функций (SUM, COUNT) и условной логики (CASE WHEN).Примечание: Использование NULLIF(SUM(active_stud), 0) для предотвращения деления на ноль при расчете ARPAU и CR активного пользователя.






